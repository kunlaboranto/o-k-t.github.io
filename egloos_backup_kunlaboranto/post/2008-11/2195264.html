<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../../css/result.css">

        <title>[펌] Oracle Data Warehousing Tips</title>
    </head>
    <body>
        <section id="wrap">
            <header>
                <h1 class="logo-title">
                    <span class="main"><img src="../../images/logo_egloos.png" width="105" height="34" alt="이글루스"></span>
                </h1>
                <div class="user-info">
                    <strong class="name">kun</strong> 님 (<strong class="name">okseop7</strong>)
                </div>
            </header>
            <main>
                <article class="post-wrap">
                    <!-- 게시물 정보 : 날짜 -->
                    <div class="post-info">
                        <span class="time">2008-11-27 20:19:19</span>
                    </div>
                    <!-- 게시물 제목 -->
                    <h2 class="post-title">[펌] Oracle Data Warehousing Tips</h2>
                    <!-- 게시물 본문 -->
                    <div class="post-body">
                        <div class="content">From : http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse.htm<br><br><br><h1><font size="2"> </font></h1><h1></h1><table style="border-collapse: collapse;" id="table2" border="0" cellpadding="0" cellspacing="0" width="521"><tbody><tr><td style="color: rgb(0, 0, 0);" width="83"><img src="http://www.dba-oracle.com/images/auth_pic_don_burleson_120_140.jpg" border="1" width="120" height="140"></td><td style="color: rgb(0, 0, 0);" width="8">&nbsp;</td><td style="font-family: Times New Roman; font-size: 12px; color: rgb(0, 0, 0);" width="380"><font size="2"> </font><h1><font size="2">Oracle Data Warehousing Tips</font></h1><p><font size="2"><i>Oracle Tips by Burleson Consulting<br>May 2005</i></font></p></td></tr></tbody></table>        <font style="font-size: 12pt;" font=""><br></font><br><font style="font-size: 12pt;" font="">  </font><b><font style="font-size: 12pt;" font="" color="#ffffff"><table style="border-collapse: collapse;" border="0" cellpadding="0" width="100%"><tbody><tr><td valign="top" width="322"><br></td><td valign="top"><br></td></tr></tbody></table>  </font></b><hr><p class="MsoNormal"><strong>          <span style="font-size: 13.5pt; font-family: Times New Roman;">Oracle 10<i>g</i>           Data Warehousing Tips</span></strong></p>          <p><em><span style="font-size: 10pt; font-family: Times New Roman;">by Donald K.           Burleson (Updated May 2005)</span></em></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">The intent of           this article is to show the main tools and techniques used by the           Oracle10<i>g</i> data warehouse administrator for time-series           warehouse tuning.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">As corporate           data warehouse systems grow from small-scale applications into           industry-wide systems, the IT manager must be in a posture to grow           without service interruption. Oracle10<i>g</i> fills this niche with           their database that allows infinite scalability, but the IT manager           must also choose server hardware that allows seamless growth. </span>          </p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">What           Does a Data Warehouse Need?</span></strong></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Since the           earliest days of Decision Support Systems (DSS) of the 1960s, database           professionals have recognized that internal processing for data           warehouse applications is very different from Online Transaction           Processing Systems (OLTP). </span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Data warehouse           applications tend to be very I/O intensive, as the database reads           trillions of bytes of information. Data warehouse systems require           specialized servers that can support the typical processing that we           see in data warehouses. Most data warehouses are bi-modal and have a           batch windows (usually in the evenings) when new data is loaded,           indexed, and summarized. The server must have on-demand CPU and RAM           resources, and the database management system must be able to           dynamically reconfigure its resources to accommodate these shifts in           processing.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Back in the           1970s, Moore’s law was developed; it stated that processor costs are           always falling while speed continues to improve. However, Moore’s law           does not apply to RAM. </span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">While RAM costs           continue to fall ever year, the speed of RAM access is constrained by           silicon technology and has not improved in the past three decades           (refer to Figure 1).</span></p>          <p style="text-align: center;" align="center"><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f"> <v:stroke joinstyle="miter"/> <v:formulas>  <v:f eqn="if lineDrawn pixelLineWidth 0"/>  <v:f eqn="sum @0 1 0"/>  <v:f eqn="sum 0 0 @1"/>  <v:f eqn="prod @2 1 2"/>  <v:f eqn="prod @3 21600 pixelWidth"/>  <v:f eqn="prod @3 21600 pixelHeight"/>  <v:f eqn="sum @0 0 1"/>  <v:f eqn="prod @6 1 2"/>  <v:f eqn="prod @7 21600 pixelWidth"/>  <v:f eqn="sum @8 21600 0"/>  <v:f eqn="prod @7 21600 pixelHeight"/>  <v:f eqn="sum @10 21600 0"/> </v:formulas> <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/> <o:lock v:ext="edit" aspectratio="t"/></v:shapetype><v:shape id="_x0000_s1032" type="#_x0000_t75" alt="" style="'width:412.5pt;" height:246.75pt'> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image001.jpg"  o:href="http://www.dbazine.com/images/burl29-1.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image001.jpg" v:shapes="_x0000_s1032" border="0" width="550" height="329"><!--[endif]--></p>          <p style="text-align: center;" align="center"><em>          <span style="font-size: 10pt; font-family: Times New Roman;">Figure 1: Speed improvements of CPU vs. RAM.</span></em></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Because RAM           speed has not improved as CPU speed has improved, RAM must be           localized near the CPUs to keep them running at full capacity, and           this is a central feature of many of the new Intel-based servers.           Non-Uniform Memory Access (NUMA) has been available for years in           high-end UNIX servers running SMP (symmetric multi-processor)           configurations.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">To process large           volumes of data quickly, the server must be able to support parallel,           large-table-full-table scans for data warehouse aggregation. One of           the most significant improvements in multi-CPU servers is their           ability to utilize Oracle parallel features for table summarization,           aggregation, DBA maintenance (table reorganization), and parallel data           manipulation. </span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">For example,           this divide-and-conquer approach makes large-table-full-table scans           run seven times faster on an eight-CPU server and 15 times faster on a           16-way SMP server (refer to Figure 2).</span></p>          <p style="text-align: center;" align="center"><!--[if gte vml 1]><v:shape id="_x0000_s1031" type="#_x0000_t75" alt="" style="'width:382.5pt;height:171.75pt'"> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image002.jpg"  o:href="http://www.dbazine.com/images/burl29-2.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image002.jpg" v:shapes="_x0000_s1031" border="0" width="510" height="229"><!--[endif]--></p>          <p style="text-align: center;" align="center"><em>          <span style="font-size: 10pt; font-family: Times New Roman;">Figure 2: Data Warehouse large-table-full-table scans          </span></em><i><span style="font-size: 10pt; font-family: Times New Roman;"><br>          <em><span style="font-family: Times New Roman;">can be parallelized for           super-fast response.</span></em></span></i></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Historically,           data warehouse applications have been constrained by I/O, but all of           this is changing with the introduction of specialized data warehouse           techniques, all with the goal of keeping the server CPUs running at           full capacity. </span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Now, while the           automated features of Oracle10<i>g</i> AMM, ASM, and automatic query           re-write simplify the role of the Oracle DBA, savvy Oracle10<i>g</i>           DBAs leverage other advanced Oracle 10<i>g</i> features to get           super-fast data warehouse performance:</span></p>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Materialized             Views</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — The Oracles materialized views (MV) feature uses Oracle             replication to allow you to pre-summarize and pre-join tables. Best             of all, Oracle MVs are integrated with the Oracle 10<i>g</i> query             re-write facility, so that any queries that might benefit from the             pre-summarization will be automatically rewritten to reference the             aggregate view, thereby avoiding a very expensive (and unnecessary)             large-table-full-table scan. The Oracle10<i>g</i> </span>            <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">            dbms_advisor</span><span style="font-size: 10pt; font-family: Times New Roman;">             utility will automatically detect and recommend MV definitions, then             create a materialized view to reduce disk I/O.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Automated             Workload Repository</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — The AWR is a critical component for data warehouse predictive             tools such as the </span>            <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">            dbms_advisor</span><span style="font-size: 10pt; font-family: Times New Roman;">             package. AWR allows you to run time-series reports of SQL access             paths and intelligently create the most efficient materialized views             for your warehouse. The AWR provides a time-series component of             warehouse tuning that is critical for the identification of             materialized views and holistic warehouse tuning. The most important             data warehouse tracking with AWR includes tracking             large-table-full-table scans, hash joins (which might be replaced             with STAR joins), and tracking RAM usage within the </span>            <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">            pga_aggregate_target</span><span style="font-size: 10pt; font-family: Times New Roman;">             region.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Multiple             Blocksizes</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — All data warehouse indexes that are accessed via range scans and             Oracle objects that must be accessed via full-table, or full-index,             scans should be in a 32k blocksize.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">STAR query             optimization</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — The Oracle 10<i>g</i> STAR query features make it easy to make             complex DSS queries run at super-fast speeds.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Multi-level             partitioning of tables and indexes</span></strong><span style="font-size: 10pt; font-family: Times New Roman;"> — Oracle now has multi-level intelligent partitioning             methods that allow Oracle to store data in a precise scheme. By             controlling where data is stored on disk, Oracle10<i>g</i> SQL can             reduce the disk I/O required to service any query.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Asynchronous             Change Data Capture</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — Change data capture allows incremental extraction, so only changed             data to be extracted easily. For example, if a data warehouse             extracts data from an operational system on a weekly basis, then the             data warehouse requires only the data that has changed since the             last extraction (that is, the data that has been modified in the             past seven days). </span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Oracle Streams</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — Streams-based feed mechanisms can capture the necessary data             changes from the operational database and send it to the destination             data warehouse. The use of redo information by the streams capture             process avoids unnecessary overhead on the production database.<br>&nbsp;</span></li><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Read-only             Tablespaces</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — Documents from<a href="http://www.fortunecity.com/skyscraper/oracle/699/orahtml/oramag/mig_o8.html">Oracle Magazine</a> and Oracle Press suggest that using tablespace partitions and marking             the older tablespaces as read-only can improve performance up to 10%. However, not everyone agrees.&nbsp; </span><font style="font-size: 12pt;" face="Times New Roman">For more details, read Robert Freeman's excellent discussion of<a href="http://www.dba-oracle.com/oracle_tips_read_only_tablespace_performance.htm">read-only tablespace performance</a>.</font><span style="font-size: 10pt; font-family: Times New Roman;"><br>&nbsp;</span></li><li class="MsoNormal"><strong><span style="font-size: 10pt; font-family: Times New Roman;">Automatic Storage             Management (ASM)</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — The revolutionary new method for managing the disk I/O subsystem             removes the tedious and time-consuming chore of I/O load balancing             and disk management. With Oracle10<i>g</i> ASM, all disks can be             logically clustered together into disk groups, and data files can be             spread across all devices using the Oracle10<i>g</i> SAME (stripe             And Mirror Everywhere) standard. By making the disk back-end a JBOD             (Just a Bunch Of Disks), Oracle10<i>g</i> manages this critical             aspect of the data warehouse.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Advanced Data             Buffer Management</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — Using Oracle 10<i>g</i>’s multiple block sizes and KEEP pool, you             can preassign warehouse objects to separate data buffers and ensure             that your working set of frequently-referenced data is always             cached. Small, frequently-referenced dimension tables should be             cached using the Oracle 10<i>g</i> KEEP pool. Oracle10<i>g</i> also             offers Automatic Memory Management (AMM). With this feature,             Oracle10<i>g</i> will automatically re-assign RAM frames between the            </span>            <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">db_cache_size</span><span style="font-size: 10pt; font-family: Times New Roman;"> and the </span>            <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">pga_aggregate_target</span><span style="font-size: 10pt; font-family: Times New Roman;">             region to maximize throughput of your data warehouse.</span></li></ul>          <p class="MsoNormal">          <span style="font-size: 10pt; font-family: Times New Roman;">All of these           techniques have helped to remove I/O bottlenecks and to make data           warehouse applications more CPU intensive. There are many server           resources that are required for all large data warehouse applications.           These features include:</span></p>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Large RAM Regions</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — All 64-bit servers have a larger word size (two to the 64th power)             that allows for up to 18 billion GB (that’s 18 exabytes). This             allows for huge scalability as the processing demand grows and             allows the database to have many gigabytes of data buffer storage.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">Fast CPU</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — Intel’s 64-bit Itanium 2 architecture is far faster than the older             32-bit chipsets. The advanced features built into the Itanium 2             chipset allow much more real work to be done for each processor             cycle. When combined with the Oracle10<i>g</i> NUMA RAM,             computationally-intensive DSS queries run at lightening speeds.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">High parallelism</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">             — Each processing node has four Itanium 2 CPUs interconnected to             local memory modules and an inter-node crossbar interconnect             controller via a high-speed bus. Up to four of these processing             nodes can be interconnected, creating a highly scalable SMP system.             This design allows large-scale parallel processing for Oracle             full-table scans — the scattered reads that are the hallmark of             Oracle warehouse systems. For example, the new 64-bit servers             support up to 64 processors, allowing for large parallel benefits.</span></li></ul>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal"><strong>            <span style="font-size: 10pt; font-family: Times New Roman;">High Performance             I/O architecture</span></strong><span style="font-size: 10pt; font-family: Times New Roman;"> — The I/O subsystem also influences scalability and performance.             Enterprise systems must provide the channel capacity required to             support large databases and networks. The Itanium 2 system             architecture can support up to 64 peripheral component interconnect             (PCI or PCI-X) 64-bit channels operating at speeds from 33 MHz to             100 MHz.</span></li></ul>          <p class="MsoNormal">          <span style="font-size: 10pt; font-family: Times New Roman;">The advent of large           RAM regions is also beneficial for the data warehouse. In most data           warehouses, a giant, central “fact” table exists, surrounded by           smaller dimension tables (refer to Figure 3).</span></p>          <p style="text-align: center;" align="center"><!--[if gte vml 1]><v:shape id="_x0000_s1030" type="#_x0000_t75" alt="" style="'width:350.25pt;height:284.25pt'"> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image003.jpg"  o:href="http://www.dbazine.com/images/burl29-3.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image003.jpg" v:shapes="_x0000_s1030" border="0" width="467" height="379"><!--[endif]--></p>          <p style="text-align: center;" align="center"><em>          <span style="font-size: 10pt; font-family: Times New Roman;">Figure 3: A typical data warehouse schema.</span></em></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">In a typical           STAR schema, the super-large full-table scans can never be cached, but           it is important to be able to control the caching of the dimension           tables and indexes. When using a 64-bit server with fast RAM access,           the Oracle KEEP pool and multiple buffer caches can be configured to           guarantee that the smaller, frequently-referenced objects always           remain in the data buffers, thereby shifting the database bottleneck           away from I/O. Once we shift the bottleneck from I/O to CPU, we are in           a position to scale performance by adding additional processors.</span></p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">Why           Oracle 10<i>g</i> for the Data Warehouse?</span></strong></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">The large data           buffer caches in most OLTP Oracle systems make them CPU-bound, but           Oracle data warehouses are another story. With terabytes of           information to aggregate and summarize, most Oracle data warehouses           are I/O-bound, and you must choose a server that optimizes disk I/O           throughput. </span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Oracle has           always made very large database (VLDB) technology a priority as           evidenced by their introduction of partitioned structures, advanced           bitmap indexing, and materialized views. Oracle10<i>g</i> provides           some features that are ideal for the data warehouse application.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">You can easily           see when an Oracle warehouse is disk I/O bound. In the following AWR           report (STATSPACK report for Oracle9i and earlier), you can see a           typical data warehouse system that is clearly constrained by disk I/O,           resulting from the high percentage of full-table and full-index scans.</span></p>          <p style="text-align: center;" align="center"><!--[if gte vml 1]><v:shape id="_x0000_s1029" type="#_x0000_t75" alt="" style="'width:393.75pt;height:104.25pt'"> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image004.jpg"  o:href="http://www.dbazine.com/images/burl29-4.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image004.jpg" v:shapes="_x0000_s1029" border="0" width="525" height="139"><!--[endif]--></p>          <p style="text-align: center;" align="center"><em>          <span style="font-size: 10pt; font-family: Times New Roman;">A STATSPACK (AWR) Top 5 Timed Event Report for an I/O-bound           Server</span></em></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Here you can see           that scattered reads (full-table scans) constitute the majority of the           total database time. This is very typical of a data warehouse that           performs aggregations via SQL and it is also common during the           “refresh” period for Oracle materialized views. The problem is the I/O           bottleneck that is introduced during these periods. </span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Because the           typical data warehouse is so data intensive, there is always a problem           fully utilizing the CPU power. UNISYS has addressed this issue by           leveraging NUMA, whereby Windows and Oracle10<i>g</i> are           automatically configured to exploit NUMA to keep the CPUs busy.           (Remember, the data buffer hit ratio is not relevant for data           warehouses or for systems that commonly perform full-table scans or           those that use </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          all_rows</span><span style="font-size: 10pt; font-family: Times New Roman;"> SQL           optimization.)</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">While a 30 GB          </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          db_cache_size</span><span style="font-size: 10pt; font-family: Times New Roman;">           might be appropriate for an OLTP shop or a shop that uses a large           working set, a super-large SGA does not benefit data warehouses and           decision support systems in which most data access is performed by a           parallelized full-table scan. When Oracle performs a parallel           full-table scan, the database blocks are read directly into the           program global area (PGA), bypassing the data buffer RAM (refer to           Figure 4).</span></p>          <p style="text-align: center;" align="center"><!--[if gte vml 1]><v:shape id="_x0000_s1028" type="#_x0000_t75" alt="" style="'width:298.5pt;height:159.75pt'"> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image005.jpg"  o:href="http://www.dbazine.com/images/burl29-5.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image005.jpg" v:shapes="_x0000_s1028" border="0" width="398" height="213"><!--[endif]--></p>          <p style="text-align: center;" align="center"><em>          <span style="font-size: 10pt; font-family: Times New Roman;">Figure 4: Parallel Full Scans Bypass SGA data buffers.</span></em></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">As we see in the           figure above, having a large </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          db_cache_size</span><span style="font-size: 10pt; font-family: Times New Roman;">           does not benefit parallel large-table-full-table scans, as this           requires memory in the </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          pga_aggregate_target</span><span style="font-size: 10pt; font-family: Times New Roman;">           region instead. With Oracle 10<i>g</i>, you can use the multiple data           buffer features to segregate and cache your dimension tables and           indexes, all while providing sufficient RAM for the full scans. When           your processing mode changes (evening ETL and rollups), Oracle10<i>g</i>           AMM will automatically detect the change in data access and           re-allocate the RAM regions to accommodate the current processing.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">All 64-bit           servers have a larger word size (two to the 64th power) that allows           for up to 18 billion GB of addressable RAM. Hence, you may be tempted           to create a super-large RAM data buffer. Data warehouse systems tend           to bypass the data buffers because of parallel full-table scans, and           maximizing disk I/O throughput is the single most critical bottleneck.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Most SMP servers           have a specialized high-speed RAM called an L2 cache that is localized           near the CPUs (refer to Figure 5).</span></p>          <p style="text-align: center;" align="center"><!--[if gte vml 1]><v:shape id="_x0000_s1027" type="#_x0000_t75" alt="" style="'width:334.5pt;height:270pt'"> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image006.jpg"  o:href="http://www.dbazine.com/images/burl29-6.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image006.jpg" v:shapes="_x0000_s1027" border="0" width="446" height="360"><!--[endif]--></p>          <p style="text-align: center;" align="center"><em>          <span style="font-size: 10pt; font-family: Times New Roman;">Figure 5: The Non-uniform Memory access architecture.</span></em></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Best of all,           Oracle 10<i>g</i> has been enhanced to recognize NUMA systems and           adjust memory and scheduling operations accordingly. NUMA technology           allows for faster communication between distributed memory in a           multi-processor server. Better than the archaic UNIX implementations           of the past decade, NUMA is fully supported by Linux and Windows           Advanced Server 2003, and Oracle can now better exploit high-end NUMA           hardware in SMP servers. </span></p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">AWR and           the Data Warehouse</span></strong></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">One important           use for the AWR tables is tracking table join methods over time and           this is especially important for ensuring that your star schema           queries are using the fastest table join method. Let’s look at a query           that produces a table join exception report.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">As we know, the           choice between a hash join, star transformation join, and a nested           loop join depends on several factors:</span></p>          <ul style="margin-bottom: 0in;" type="disc"><li class="MsoNormal">            <span style="font-size: 10pt; font-family: Times New Roman;">The relative number of rows in each table</span></li><li class="MsoNormal">            <span style="font-size: 10pt; font-family: Times New Roman;">The presence of indexes on the key values</span></li><li class="MsoNormal">            <span style="font-size: 10pt; font-family: Times New Roman;">The settings for static parameters such as</span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">             index_caching</span><span style="font-size: 10pt; font-family: Times New Roman;">             and </span>            <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">            cpu_costing</span><span style="font-size: 10pt; font-family: Times New Roman;">            </span></li><li class="MsoNormal">            <span style="font-size: 10pt; font-family: Times New Roman;">The current setting and available memory in            </span>            <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">            pga_aggregate_target</span></li></ul>          <p class="MsoNormal">          <span style="font-size: 10pt; font-family: Times New Roman;">As we know, hash           joins do not use indexes and perform full-table scans (often using           parallel query). Hence, hash joins with parallel full-table scans tend           to drive up CPU consumption. </span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Also, PGA memory           consumption becomes higher when we have hash joins, but if AMM is           enabled, then that’s not usually a a problem.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Let’s look at a           query that produces a report alerting an Oracle DBA when a hash join           operation count exceeds some threshold:</span></p>          <p><!--[if gte vml 1]><v:shape id="_x0000_s1026" type="#_x0000_t75" alt="" style="'width:393pt;height:348pt'"> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image007.jpg"  o:href="http://www.dbazine.com/images/burl29-7.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image007.jpg" v:shapes="_x0000_s1026" border="0" width="524" height="464"><!--[endif]--></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">The sample           output might look like this, showing the number of hash joins during           the snapshot period along with the relative I/O and CPU associated           with the processing. Note that the values for </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          rows_processed</span><span style="font-size: 10pt; font-family: Times New Roman;">           are generally higher for hash joins (which do full-table scans) as           opposed to nested-loop joins, which generally involve a very small set           of returned rows.</span></p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">Hash           Join Thresholds</span></strong></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;"><!--[if gte vml 1]><v:shape id="_x0000_s1025" type="#_x0000_t75" alt="" style="'width:285.75pt;height:129.75pt'"> <v:imagedata src="art_dbazine_oracle_10g_data_warehouse_files/image008.jpg"  o:href="http://www.dbazine.com/images/burl29-8.jpg"/></v:shape><![endif]--><!--[if !vml]--><img src="http://www.dba-oracle.com/art_dbazine_oracle_10g_data_warehouse_files/image008.jpg" v:shapes="_x0000_s1025" border="0" width="381" height="173"><!--[endif]--></span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;"><br>          The previous script can be easily modified to track star           transformation joins.</span></p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">Be           careful in Oracle9i </span></strong></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">As a related           sidenote, in Oracle9i, the sorting default is that no single task may           consume more than five percent of the </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          pga_aggregate_target</span><span style="font-size: 10pt; font-family: Times New Roman;">           region before the sort pages-out to the TEMP tablespace for a disk           sort. For parallel sorts, the limit is 30 percent of the PGA           aggregate, regardless of the number of parallel processes.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Be aware that in           Oracle9i, when you set </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          pga_aggregate_target</span><span style="font-size: 10pt; font-family: Times New Roman;">,           no single hash join may consume more than five percent of the area. If           you have specialized hash joins that require more hash area.</span></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">To force hash           joins in Oracle9i, you must take two steps. It may not be enough to           increase the </span>          <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          hash_area_size</span><span style="font-size: 10pt; font-family: Times New Roman;">           if the CBO is stubborn, and you may need to force the hash join with a           hint.</span></p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">Step 1</span></strong><span style="font-size: 10pt; font-family: Times New Roman;">           — Increase the hash_area_size maximum</span></p>          <p><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          alter session set workarea_size_policy=manual;<br>          alter session set hash_area_size=1048576000;</span></p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">Step 2          </span></strong><span style="font-size: 10pt; font-family: Times New Roman;">—           Add a use_hash hint to the SQL</span></p>          <p><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">          select /*+ use_hash(a, b)*/<br>          from . . . </span></p>          <p><strong><span style="font-size: 10pt; font-family: Times New Roman;">          Conclusion</span></strong></p>          <p><span style="font-size: 10pt; font-family: Times New Roman;">Oracle Database           10<i>g</i> has never been better for managing very large databases. My           favorite new features are the ability to track SQL execution over time           and to employ Oracle partitioning, materialized views, and start           transformation joins for super-fast data access.</span> </p>                        <br></div>
                        <div class="post-footer">
                            <button class="btn" onclick="button_click();">목록</button>
                        </div>
                    </div>
                </article>
            </main>
        </section>

        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

        <script>
            function button_click() {
                if(history.length > 1) {
                    history.back();
                } else {
                    document.location.href = "../../블로그포스트목록.html";
                }
            }
        </script>
    </body>
</html>
