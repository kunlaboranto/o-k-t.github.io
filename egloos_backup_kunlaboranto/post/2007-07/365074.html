<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../../css/result.css">

        <title>[펌] Tuning for Oracle9i on AIX - /usr/samples/kernel/vmtune -P 20</title>
    </head>
    <body>
        <section id="wrap">
            <header>
                <h1 class="logo-title">
                    <span class="main"><img src="../../images/logo_egloos.png" width="105" height="34" alt="이글루스"></span>
                </h1>
                <div class="user-info">
                    <strong class="name">kun</strong> 님 (<strong class="name">okseop7</strong>)
                </div>
            </header>
            <main>
                <article class="post-wrap">
                    <!-- 게시물 정보 : 날짜 -->
                    <div class="post-info">
                        <span class="time">2007-07-02 12:16:02</span>
                    </div>
                    <!-- 게시물 제목 -->
                    <h2 class="post-title">[펌] Tuning for Oracle9i on AIX - /usr/samples/kernel/vmtune -P 20</h2>
                    <!-- 게시물 본문 -->
                    <div class="post-body">
                        <div class="content">From : <a href="http://download.oracle.com/docs/html/A97297_01/appa_aix.htm">http://download.oracle.com/docs/html/A97297_01/appa_aix.htm</a><br><br># /usr/samples/kernel/vmtune -p 5 -P 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br># /usr/samples/kernel/vmtune -a |grep -e perm -e free<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minperm = 49161<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxperm = 196646<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; numperm = 52629<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minperm % = 5.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxperm % = 20.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; numperm % = 5.4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minfree = 120<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxfree = 128<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; strict_maxperm = 0<br><br>nmon 을 재구동해야 설정치가 보인다.<br><br><br><h1><span style="COLOR: #330099; FONT-FAMILY: arial, helvetica, sans-serif">A.Tuning for Oracle9<em>i</em> on AIX </span></h1><p>This appendix contains the following tuning information for Oracle9<em>i</em> on AIX: </p><ul><li type="disc"><p><a href="http://download.oracle.com/docs/html/A97297_01/appa_aix.htm#i631085">Memory and Paging</a> </p></li><li type="disc"><p><a href="http://download.oracle.com/docs/html/A97297_01/appa_aix.htm#i631245">Disk I/O Issues</a> </p></li><li type="disc"><p><a href="http://download.oracle.com/docs/html/A97297_01/appa_aix.htm#i631579">CPU Scheduling and Process Priorities</a> </p></li><li type="disc"><p><a href="http://download.oracle.com/docs/html/A97297_01/appa_aix.htm#BABGDHAH">Resilvering with Oracle9<em>i</em></a> </p></li></ul><a id="i631085" name="i631085"></a><div class="sect1"><a id="sthref601" name="sthref601"></a><h2><span style="COLOR: #330099; FONT-FAMILY: arial, helvetica, sans-serif">Memory and Paging </span></h2><p><a id="sthref602" name="sthref602"></a>Memory contention occurs when processes require more memory than is available. To cope with the shortage, the system pages programs and data between memory and disks. </p><a id="i631089" name="i631089"></a><div class="sect2"><a id="sthref603" name="sthref603"></a><h3><span style="COLOR: #330099; FONT-FAMILY: arial, helvetica, sans-serif">Controlling Buffer-Cache Paging Activity </span></h3><p>Excessive <a id="sthref604" name="sthref604"></a>paging activity decreases performance substantially. This can become a problem with database files created on journaled file systems (JFS and JFS2). In this situation, a large number of SGA data buffers might also have analogous journaled file system buffers containing the most frequently referenced data. The behavior of the AIX file buffer cache manager can have a significant impact on performance. It can cause an I/O bottleneck, resulting in lower overall system throughput. </p><p>On AIX, tuning <a id="sthref605" name="sthref605"></a>buffer-cache paging activity is possible but it must be done carefully and infrequently. Use the <code><span style="FONT-FAMILY: Courier New">vmstat</span></code> command to tune the following AIX system parameters: </p><table dir="ltr" title="vmstat command parameter description" cellspacing="0" cellpadding="3" rules="groups" width="100%" summary="This table describes the vmstat command parameters." border="1" frame="hsides"><thead><tr valign="top" align="left"><th id="r1c1" valign="bottom" align="left"><span style="FONT-FAMILY: Arial, Helvetica, sans-serif"><strong><strong>Parameter</strong> </strong></span></th><th id="r1c2" valign="bottom" align="left"><span style="FONT-FAMILY: Arial, Helvetica, sans-serif"><strong>Description </strong></span></th></tr></thead><tbody><tr valign="top" align="left"><td id="r2c1" align="left" headers="r1c1"><a id="sthref606" name="sthref606"></a><a id="sthref607" name="sthref607"></a>MINFREE </td><td align="left" headers="r2c1 r1c2">The minimum free-list size. If the free-list space in the buffer falls below this size, the system uses page stealing to replenish the free list. </td></tr><tr valign="top" align="left"><td id="r3c1" align="left" headers="r1c1"><a id="sthref608" name="sthref608"></a><a id="sthref609" name="sthref609"></a>MAXFREE </td><td align="left" headers="r3c1 r1c2">The maximum free-list size. If the free-list space in the buffer exceeds this size, the system stops using page stealing to replenish the free list. </td></tr><tr valign="top" align="left"><td id="r4c1" align="left" headers="r1c1"><a id="sthref610" name="sthref610"></a><a id="sthref611" name="sthref611"></a>MINPERM </td><td align="left" headers="r4c1 r1c2">The minimum number of permanent buffer pages for file I/O. </td></tr><tr valign="top" align="left"><td id="r5c1" align="left" headers="r1c1"><a id="sthref612" name="sthref612"></a><a id="sthref613" name="sthref613"></a>MAXPERM </td><td align="left" headers="r5c1 r1c2">The maximum number of permanent buffer pages for file I/O. </td></tr></tbody></table><div align="center"><br><table dir="ltr" title="This is a layout table to format a tip" cellspacing="0" cellpadding="3" rules="groups" width="80%" summary="This is a layout table to format a tip" border="1" frame="hsides"><tbody><tr><td align="left"><p><span style="FONT-FAMILY: arial, helvetica, sans-serif"><strong>See Also:</strong> </span></p><em>AIX Performance Tuning Guide, Version 3.2 and 4 or the AIX5L Performance Management Guide for more information on AIX system parameters.</em> </td></tr></tbody></table><br></div><p>Log on as the <code><span style="FONT-FAMILY: Courier New">root</span></code> user and use the <code><span style="FONT-FAMILY: Courier New">vmtune</span></code> command to change these limits. The AIX <code><a id="sthref614" name="sthref614"></a><span style="FONT-FAMILY: Courier New">vmtune</span></code> command is operating-system version specific. If you run the <code><span style="FONT-FAMILY: Courier New">vmtune</span></code> command from one release on a different AIX release, the operating system might fail. </p><div class="sect3"><a id="sthref615" name="sthref615"></a><h4><span style="COLOR: #330099; FONT-FAMILY: arial, helvetica, sans-serif">Tuning the MINFREE and MAXFREE Parameters </span></h4><p>You can base the size of the MINFREE parameter on the working set size of the programs that require a quick response. You must have enough pages in the free list so that the loaded program does not need to replenish the free list. You can determine the size of the working set for a program by using the <code><span style="FONT-FAMILY: Courier New">svmon</span></code> <code><span style="FONT-FAMILY: Courier New">-p</span></code> command. The value of the MAXFREE parameter should be greater than the value of the MINFREE parameter by the value of the MAXPGAHEAD parameter, or 8 pages, which ever is higher. For instance, if you determine that the MINFREE parameter value should be 128 pages and the MAXPGAHEAD parameter value is 16 pages, enter the following command to set the value of the MINFREE parameter to 128 pages and the value of the MAXFREE parameter to 144 pages: </p><pre>$ /usr/samples/kernel/vmtune -f 128 -F 144</pre></div></div><div class="sect2"><a id="sthref616" name="sthref616"></a><h3><span style="COLOR: #330099; FONT-FAMILY: arial, helvetica, sans-serif">Tuning the AIX File Buffer Cache </span></h3><p>The purpose of the AIX file buffer cache is to reduce disk access frequency when journaled file systems are used. If this cache is too small, disk usage increases and potentially saturates one or more disks. If the cache is too large, memory is wasted. </p><div align="center"><br><table dir="ltr" title="This is a layout table to format a tip" cellspacing="0" cellpadding="3" rules="groups" width="80%" summary="This is a layout table to format a tip" border="1" frame="hsides"><tbody><tr><td align="left"><p><span style="FONT-FAMILY: arial, helvetica, sans-serif"><strong>See Also:</strong> </span></p><a href="http://download.oracle.com/docs/html/A97297_01/appa_aix.htm#i631089">"Controlling Buffer-Cache Paging Activity"</a> for information on the implications of increasing the AIX file buffer cache. </td></tr></tbody></table><br></div><p>You can configure the AIX file buffer cache by adjusting the MINPERM and MAXPERM parameters. In general, if the buffer hit ratio is low (less than 90 percent), as determined by the <code><span style="FONT-FAMILY: Courier New">sar&nbsp;-b</span></code> command, increasing the MINPERM parameter value might help. If maintaining a high buffer hit ratio is not critical, decreasing the MINPERM parameter value increases the physical memory available. Refer to your AIX documentation for more information on increasing the size of the AIX file buffer cache. </p><p>The performance gain cannot be quantified easily, because it depends on the degree of multiprogramming and the I/O characteristics of the workload. </p><div class="sect3"><a id="sthref617" name="sthref617"></a><h4><span style="COLOR: #330099; FONT-FAMILY: arial, helvetica, sans-serif">Tuning the MINPERM and MAXPERM Parameters </span></h4><p>AIX provides a mechanism for you to loosely control the ratio of page frames used for files versus those used for computational (working or program text) segments by adjusting the <a id="sthref618" name="sthref618"></a><a id="sthref619" name="sthref619"></a>MINPERM and<a id="sthref620" name="sthref620"></a><a id="sthref621" name="sthref621"></a> MAXPERM values according to the following guidelines: </p><ul><li type="disc"><p>If the percentage of real memory occupied by file pages falls below the MINPERM value, the page-replacement algorithm steals both file and computational pages, regardless of repage rates. </p></li><li type="disc"><p>If the percentage of real memory occupied by file pages rises above the MAXPERM value, the page-replacement algorithm steals both file and computational pages. </p></li><li type="disc"><p>If the percentage of real memory occupied by file pages is between the MINPERM and MAXPERM parameter values, the virtual memory manager (VMM) normally steals only file pages, but if the repaging rate for file pages is higher then the repaging rate for computational pages, the computational pages are stolen as well. </p></li></ul><p>Use the following algorithm to calculate the default values: </p><ul><li type="disc"><p>MINPERM (in pages) = ((number of page frames)-1024) * 0.2 </p></li><li type="disc"><p>MAXPERM (in pages) = ((number of page frames)-1024) * 0.8 </p></li></ul><p>Use the following command to change the value of the MINPERM parameter to 5 percent of the total number of page frames, and the value of the MAXPERM parameter to 20 percent of the total number of page frames: </p><pre># vmtune -p 5 -P 20</pre><p>The default values are 20 percent and 80 percent, respectively. </p><p>If the database files are on raw devices, you can set the MINPERM and MAXPERM parameters to low values, for example 5 percent and 20 percent, respectively. This is because the AIX file buffer cache is not used for raw devices. The memory might be better used for other purposes, such as the Oracle System Global Area. <br><br>....</p></div></div></div></div>
                        <div class="post-footer">
                            <button class="btn" onclick="button_click();">목록</button>
                        </div>
                    </div>
                </article>
            </main>
        </section>

        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

        <script>
            function button_click() {
                if(history.length > 1) {
                    history.back();
                } else {
                    document.location.href = "../../블로그포스트목록.html";
                }
            }
        </script>
    </body>
</html>
